const { ax, mock } = require("./aa-lib.js")

const errCodeMap = new Map()
errCodeMap.set(20000, "用户不存在")

function GetUser(postData) {
  return ax.post("/", postData).then((resp) => {
      let code = resp.data.code
      if (code !== 0) {
        throw {
          code: code,
          msg: errCodeMap.get(code),
        }
      }
      return resp.data.data
    })
    .catch((err) => {
      if (err.hasOwnProperty("code")) {
        throw err
      } else {
        throw {
          code: 500,
          msg: "服务器错误",
        }
      }
    })

  /* return mock(0, {
    value: "first user",
  }) */
}

module.exports = {
  GetUser,
}
